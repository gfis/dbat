<?xml version="1.0" encoding="UTF-8"?>
<!--
	Interactive view definition for test form crud03.xml
	to be generated by etc/xslt/gen_form.xsl äöü
    @(#) $Id$
    2012-05-02, Dr. Georg Fischer
-->
<!--test/crud01.xml äöü
	@(#) $Id$
	Generated by dbat/etc/xslt/dbiv_spec.xsl at 2012-05-15T22:10:39+02:00
	DO NOT EDIT HERE, but in test/crud01.iv.xml instead!
-->
<dbat xmlns="http://www.teherba.org/2007/dbat" xmlns:ht="http://www.w3.org/1999/xhtml" xmlns:iv="http://www.teherba.org/2011/dbiv" xmlns:db="http://www.teherba.org/2007/dbat" encoding="UTF-8" conn="worddb" lang="en" title="test/crud01">
	<!--
	    param "view" takes the following values:
	    sear - search form only
	    del  - confirmation of deletion
	    del2 - SQL DELETE + search form
	    ins  - insert form
	    ins2 - SQL INSERT + search form
	    upd  - update form
	    upd2 - SQL UPDATE + search form
	-->
	<ht:h2><ht:a href="servlet?spec=test.index">Test</ht:a> Form - Relatives (with INT key)</ht:h2>

<!--================================-->
<choose>
	<when name="view" match="(sear|ins2|upd2|del2|)">
		<ht:form method="post">
			<ht:input name="view" type="hidden" value="sear"/>
			<ht:table>
			<ht:tr><ht:td valign="top">Name:</ht:td><ht:td><ht:input name="search_crit_1" size="40" init="" title="[\w\-%]*" onkeyup="this.form.name.className = (this.form.name.value.match('^[\\w\\-%]*$')) ? 'valid': 'invalid'"/> Letters and "-"</ht:td></ht:tr>
			<ht:tr><ht:td valign="top">Died:</ht:td><ht:td><ht:input name="search_crit_2" size="4" init="" title="\d{4}" onkeyup="this.form.decease.className = (this.form.decease.value.match('^\\d{4}$')) ? 'valid': 'invalid'"/> yyyy</ht:td></ht:tr>
			<ht:tr><ht:td valign="top">Family:</ht:td><ht:td><ht:select name="search_crit_3" init="" height="3">
				<ht:option value="">(any)</ht:option>
				<ht:option value="Ritter">Ritter Family</ht:option>
				<ht:option value="Fischer">Fischer Family</ht:option>
				</ht:select></ht:td></ht:tr>
			</ht:table>
			<ht:input name="gender" type="hidden" init="M"/>
			<ht:input name="birth" type="hidden" init=""/>
			<ht:input name="place" type="hidden" init=""/>
			<ht:input name="changed" type="hidden" init=""/>
			<ht:input name="user" type="hidden" init=""/>
			<ht:input type="submit" value="Search"/>
		</ht:form>
		<ht:h4>Persons for key 
			 <ht:em> <parm name="search_crit_1"/></ht:em>%
			 <ht:em> <parm name="search_crit_2"/></ht:em>%
			 <ht:em> <parm name="search_crit_3"/></ht:em>%
		</ht:h4>
		<select limit="2048">
			<col name="name" label="Name" link="test/crud03&amp;search_crit_1=">
				name
			</col>
			<col name="decease" label="Died">
				decease
			</col>
			<col name="family" label="Family">family
			</col>
			<col name="gender" label="Gender" align="center">gender
			</col>
			<col name="birth" label="Birthdate">
				birth
			</col>
			<col name="place" label="Place" href="http://de.wikipedia.org/index.php?&amp;title=">
				place
			</col>
			<col name="changed" label="Changed">
				changed
			</col>
			<from>relatives</from>
			<where>name like '<parm name="search_crit_1"/>%'
				and CAST(decease AS CHAR(4)) like '<parm name="search_crit_2"/>%'
				and family like '<parm name="search_crit_3"/>%'
			</where>
			<order by="1,2"/>
			<counter desc="Person,s"/>
		</select>
	</when><when name="view" match="(sear|)">
	<ht:h3>Statistics</ht:h3><db:select><db:col label="Count" align="right">count(*)</db:col><db:col label="Min. Birth" align="center">min(birth)		</db:col><db:col label="Max. Birth" align="center">max(birth)		</db:col><db:col label="Min. Decease" align="center">min(decease)	</db:col><db:col label="Max. Decease" align="center">max(decease)	</db:col><db:from>relatives
		</db:from></db:select></when>
</choose>
	
</dbat>
