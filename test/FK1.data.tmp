
	-- Foreign key example from MySQL 5 manual, slightly changed such that it
	-- runs through http://developer.mimer.se/validator/parser99/index.tml#parser
	-- @(#) $Id: all.tca 953 2012-06-03 09:47:47Z gfis $
	-- 2011-11-11, Dr. Georg Fischer
	-- SQL constraints
	DROP   TABLE if exists product_order;
	DROP   TABLE if exists product;
	CREATE TABLE product 
			( category 	INT NOT NULL
			, id 		CHAR(8) NOT NULL
			, price 	DECIMAL
			, CONSTRAINT PK1 PRIMARY KEY(id, category)
			, CONSTRAINT UK2 UNIQUE     (id)
			) Engine=InnoDB;
	DROP   TABLE if exists customer;
	CREATE TABLE customer 
			( id 		CHAR(8) NOT NULL
			, PRIMARY KEY (id)
			) Engine=InnoDB;
	CREATE TABLE product_order 
			( numb 				INT NOT NULL
			, product_category 	INT NOT NULL
	        , product_id 		CHAR(8) NOT NULL DEFAULT '00'
	        , customer_id 		CHAR(8) NOT NULL DEFAULT '17'
	        , CONSTRAINT PK2 PRIMARY KEY(numb)
	        , CONSTRAINT UK3 UNIQUE (product_id, product_category)
	        , CONSTRAINT FK1 FOREIGN KEY (product_id, product_category)
	             REFERENCES product(id, category)
	                 ON UPDATE CASCADE 
	                 ON DELETE RESTRICT,
	                 CHECK (customer_id)
	        , CONSTRAINT FK2 FOREIGN KEY (customer_id)
	             REFERENCES customer(id)
			) Engine=InnoDB;
	COMMIT;
	CREATE INDEX prodnx ON product
			( category  ASC
			);
	CREATE UNIQUE INDEX produx ON product
			( id        DESC
			);
	COMMIT;
